
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2014-09-10
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Purpose | Simple :: Archetype</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/cosmo/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="./css/bootswatch.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />

		<link href="http://yandex.st/highlightjs/7.5/styles/github.min.css" rel="stylesheet" />

		<link href="./css/lightbox.css" rel="stylesheet" />

		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->



		<!-- Google Analytics -->
		<script type="text/javascript">

			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-54501187-1']);
			_gaq.push(['_trackPageview']);

			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();

		</script>
		</head>

	<body class="page-index project-simple-archetype" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="../../"><span class="color-highlight">Java Examples</span> Project</a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li ><a href="https://github.com/gtsntzs/blog/master.zip" title="Download" class="externalLink">Download</a></li>
							<li ><a href="https://github.com/gtsntzs/blog" title="GitHub project" class="externalLink">GitHub project</a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Projects <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../index.html" title="Archetypes::Parent">Archetypes::Parent</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="https://github.com/gtsntzs/blog/issues/" title="Issues" class="externalLink">Issues</a></li>
									<li ><a href="https://github.com/gtsntzs/blog" title="Fork on GitHub" class="externalLink">Fork on GitHub</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="../../" id="bannerLeft"><h1><span class="color-highlight">Modern Java Examples</span></h1></a>
					<p class="lead">Modern Java</p>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
	</div>
		<div>
			<ul class="breadcrumb">
				<li><a href="../../" title="Java Examples">Java Examples</a></li>
				<li class="divider">/</li>
				<li><a href="../" title="Archetypes :: Parent">Archetypes :: Parent</a></li>
				<li class="divider">/</li>
				<li><a href="./" title="Simple Archetype :: Example">Simple Archetype :: Example</a></li>
				<li class="divider">/</li>
				<li>Purpose</li>
			</ul>
		</div>
		<hr class="toc-separator" />
		<div id="toc-bar" class="navbar" data-spy="affix" data-offset-top="250">
			<div class="navbar-inner">
				<div id="toc-scroll-target" class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#toc-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<div class="nav-collapse collapse" id="toc-nav-collapse">
						<ul id="toc" class="nav">
						<li class="toplevel"><a href="#Purpose" title="Purpose">Purpose</a></li>
						<li class="divider-vertical"></li>
						<li class="toplevel"><a href="#Procedure" title="Procedure">Procedure</a></li>
						<li class="divider-vertical"></li>
						<li class="toplevel"><a href="#Recipe" title="Recipe">Recipe</a></li>
						<li class="divider-vertical"></li>
						<li class="toplevel"><a href="#Output" title="Output">Output</a></li>
						<li class="divider-vertical"></li>
						<li class="toplevel"><a href="#tips__tricks" title="tips & tricks">tips & tricks</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<hr /> 
<div class="section"> 
 <div class="page-header">
  <h2 id="Purpose">Purpose</h2>
 </div> 
 <p>A simple custom Maven Archetype example for java projects generation.</p> 
</div> 
<div class="section"> 
 <h2 id="Procedure">Procedure</h2> 
 <p>Generate a simple project or by using <a class="externalLink" href="http://maven.apache.org/archetype/maven-archetype-bundles/maven-archetype-archetype/">maven-archetype-archetype</a>. Create the project structure in the archetype-resources as shown below.</p> 
 <div class="source"> 
  <pre>simple-archetype
├── pom.xml
└── src
    ├── main
    │   └── resources
    │       ├── archetype-resources
    │       │   ├── pom.xml
    │       │   ├── Readme.md
    │       │   └── src
    │       │       ├── main
    │       │       │   ├── java
    │       │       │   │   └── App.java
    │       │       │   └── resources
    │       │       ├── site
    │       │       └── test
    │       │           └── java
    │       │               └── AppTest.java
    │       └── META-INF
    │           └── maven
    │               └── archetype-metadata.xml
    └── site
</pre> 
 </div> 
 <p>The simple-archetype pom must be packaged as “maven-archetype” and include the archetype-packaging and maven-archetype-plugin plugins.</p> 
 <div class="source"> 
  <pre>&lt;project
	xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;

  &lt;parent&gt;
	 &lt;groupId&gt;soa.gtsntzs&lt;/groupId&gt;
	 &lt;artifactId&gt;archetypes&lt;/artifactId&gt;
	 &lt;version&gt;1.0.0&lt;/version&gt;
  &lt;/parent&gt;

  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;soa.gtsntzs.archetypes&lt;/groupId&gt;
  &lt;artifactId&gt;simple-archetype&lt;/artifactId&gt;
  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
  &lt;!-- packaging is maven-archetype! --&gt;
  &lt;packaging&gt;maven-archetype&lt;/packaging&gt;

  &lt;url&gt;http://gtsntzs.github&lt;/url&gt;
  &lt;name&gt;Simple :: Archetype&lt;/name&gt;

  &lt;description&gt;
		Simple Archetype.
  &lt;/description&gt;

 &lt;build&gt;
    &lt;extensions&gt;
      &lt;extension&gt;
        &lt;groupId&gt;org.apache.maven.archetype&lt;/groupId&gt;
        &lt;artifactId&gt;archetype-packaging&lt;/artifactId&gt;
        &lt;version&gt;2.2&lt;/version&gt;
      &lt;/extension&gt;
    &lt;/extensions&gt;

    &lt;pluginManagement&gt;
      &lt;plugins&gt;
	        &lt;plugin&gt;
          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
          &lt;artifactId&gt;maven-archetype-plugin&lt;/artifactId&gt;
          &lt;version&gt;2.2&lt;/version&gt;
        &lt;/plugin&gt;
      &lt;/plugins&gt;
    &lt;/pluginManagement&gt;
  &lt;/build&gt;

&lt;/project&gt;
</pre> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="Recipe">Recipe</h2> 
 <div class="source"> 
  <pre>META-INF
    │           └── maven
    │               └── archetype-metadata.xml
</pre> 
 </div> 
 <p>in the META-INF directory create a maven folder and in the folder an <b>archetype-metadata.xml</b> file, where the metadata will be specified. As metadata tags the <b>requiredProperties</b> define the version of the dependency to be used and the <b>fileSets</b> the project directory structure. In a <b>fileSet</b> by using the includes tag only files satisfying the specified pattern will be copied in the new project. When the includes is not being used then all folders will be included as long as the have a file of any extension as defined in the <b>src/site</b> directory below.</p> 
 <div class="source"> 
  <pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;archetype-descriptor
    xsi:schemaLocation=&quot;http://maven.apache.org/plugins/maven-archetype-plugin/archetype-descriptor/1.0.0 http://maven.apache.org/xsd/archetype-descriptor-1.0.0.xsd&quot;
    name=&quot;simple-archetype-java&quot;
    xmlns=&quot;http://maven.apache.org/plugins/maven-archetype-plugin/archetype-descriptor/1.0.0&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;

  &lt;requiredProperties&gt;
    &lt;requiredProperty key=&quot;log4j-version&quot;&gt;
      &lt;defaultValue&gt;1.2.17&lt;/defaultValue&gt;
    &lt;/requiredProperty&gt;
    &lt;requiredProperty key=&quot;source-version&quot;&gt;
      &lt;defaultValue&gt;1.7&lt;/defaultValue&gt;
    &lt;/requiredProperty&gt;
    &lt;requiredProperty key=&quot;maven-compiler-plugin-version&quot;&gt;
      &lt;defaultValue&gt;2.5.1&lt;/defaultValue&gt;
    &lt;/requiredProperty&gt;
    &lt;requiredProperty key=&quot;maven-resources-plugin-version&quot;&gt;
      &lt;defaultValue&gt;2.6&lt;/defaultValue&gt;
    &lt;/requiredProperty&gt;
    &lt;requiredProperty key=&quot;slf4j-version&quot;&gt;
      &lt;defaultValue&gt;1.7.7&lt;/defaultValue&gt;
    &lt;/requiredProperty&gt;
    &lt;requiredProperty key=&quot;junit-version&quot;&gt;
      &lt;defaultValue&gt;4.11&lt;/defaultValue&gt;
    &lt;/requiredProperty&gt;
  &lt;/requiredProperties&gt;

  &lt;fileSets&gt;
    &lt;fileSet filtered=&quot;true&quot; packaged=&quot;true&quot; encoding=&quot;UTF-8&quot;&gt;
      &lt;directory&gt;src/main/java&lt;/directory&gt;
      &lt;includes&gt;
        &lt;include&gt;**/*.java&lt;/include&gt;
      &lt;/includes&gt;
    &lt;/fileSet&gt;
    &lt;fileSet filtered=&quot;true&quot; encoding=&quot;UTF-8&quot;&gt;
      &lt;directory&gt;src/main/resources&lt;/directory&gt;
      &lt;includes&gt;
        &lt;include&gt;**/*&lt;/include&gt;
      &lt;/includes&gt;
    &lt;/fileSet&gt;
    &lt;fileSet filtered=&quot;true&quot; packaged=&quot;true&quot; encoding=&quot;UTF-8&quot;&gt;
      &lt;directory&gt;src/test/java&lt;/directory&gt;
      &lt;includes&gt;
        &lt;include&gt;**/*.java&lt;/include&gt;
      &lt;/includes&gt;
    &lt;/fileSet&gt;
    &lt;fileSet filtered=&quot;true&quot; encoding=&quot;UTF-8&quot;&gt;
      &lt;directory&gt;src/test/resources&lt;/directory&gt;
      &lt;includes&gt;
        &lt;include&gt;**/*&lt;/include&gt;
      &lt;/includes&gt;
    &lt;/fileSet&gt;
    &lt;fileSet encoding=&quot;UTF-8&quot;&gt;
      &lt;directory&gt;src/site&lt;/directory&gt;
    &lt;/fileSet&gt;
    &lt;fileSet encoding=&quot;UTF-8&quot;&gt;
      &lt;directory&gt;&lt;/directory&gt;
      &lt;includes&gt;
        &lt;include&gt;ReadMe.md&lt;/include&gt;
      &lt;/includes&gt;
    &lt;/fileSet&gt;
  &lt;/fileSets&gt;
&lt;/archetype-descriptor&gt;
</pre> 
 </div> 
 <div class="source"> 
  <pre>resources
    ├── archetype-resources
       ├── pom.xml
</pre> 
 </div> 
 <p>The desired pom will import the groupId, artifactId, version will be given manualy by adding the tags to the <b>mvn:generate</b> command or through the interactive mode. The *<b>-version</b> properties will be inserted from the archetype-metadata.xml specified above.</p> 
 <div class="source"> 
  <pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
		 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
		 xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0
							 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;

  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

  &lt;groupId&gt;${groupId}&lt;/groupId&gt;
  &lt;artifactId&gt;${artifactId}&lt;/artifactId&gt;
  &lt;packaging&gt;jar&lt;/packaging&gt;
  &lt;version&gt;${version}&lt;/version&gt;

  &lt;name&gt;Simple Archetype :: Project&lt;/name&gt;
  &lt;url&gt;http://www.domain.org&lt;/url&gt;

  &lt;properties&gt;
    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;

	&lt;!-- dependencies properties --&gt;
    &lt;slf4j.version&gt;${slf4j-version}&lt;/slf4j.version&gt;
    &lt;log4j.version&gt;${log4j-version}&lt;/log4j.version&gt;
    &lt;junit.version&gt;${junit-version}&lt;/junit.version&gt;
    &lt;!-- plugins properties --&gt;
	&lt;source.version&gt;${source-version}&lt;/source.version&gt;
    &lt;maven.compiler.plugin.version&gt;${maven-compiler-plugin-version}&lt;/maven.compiler.plugin.version&gt;
    &lt;maven.resources.plugin.version&gt;${maven-resources-plugin-version}&lt;/maven.resources.plugin.version&gt;
  &lt;/properties&gt;

  &lt;dependencies&gt;
    &lt;!-- logging --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
      &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
      &lt;version&gt;${slf4j.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
      &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
      &lt;version&gt;${slf4j.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
      &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;
      &lt;version&gt;${slf4j.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;log4j&lt;/groupId&gt;
      &lt;artifactId&gt;log4j&lt;/artifactId&gt;
      &lt;version&gt;${log4j.version}&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;!-- testing --&gt;
    &lt;dependency&gt;
	  &lt;groupId&gt;junit&lt;/groupId&gt;
	  &lt;artifactId&gt;junit&lt;/artifactId&gt;
 	  &lt;version&gt;${junit.version}&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;

  &lt;build&gt;
    &lt;defaultGoal&gt;install&lt;/defaultGoal&gt;

    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
        &lt;version&gt;${maven.compiler.plugin.version}&lt;/version&gt;
        &lt;configuration&gt;
          &lt;source&gt;${source.version}&lt;/source&gt;
          &lt;target&gt;${source.version}&lt;/target&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;
        &lt;version&gt;${maven.resources.plugin.version}&lt;/version&gt;
        &lt;configuration&gt;
          &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;

&lt;/project&gt;
</pre> 
 </div> 
 <p>Once everything is in place, install the archetype to the local repository: <tt>sh mvn clean install </tt> The archetype is ready for use: </p> 
 <div> 
  <pre> mvn archetype:generate  -DarchetypeGroupId=soa.gtsntzs.archetypes  -DarchetypeArtifactId=simple-archetype  -DarchetypeVersion=1.0-SNAPSHOT  -DgroupId=<b>test.group</b>  -DartifactId=<b>test</b> </pre> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="Output">Output</h2> 
 <p>The produced project structure is:</p> 
 <div class="source"> 
  <pre>test/
├── pom.xml
└── src
    ├── main
    │   ├── java
    │   │   └── soa
    │   │       └── gtsntzs
    │   │           └── App.java
    │   └── resources
    ├── site
    │   └── markdown
    │       └── index.md
    └── test
        ├── java
        │   └── soa
        │       └── gtsntzs
        │           └── AppTest.java
        └── resources
</pre> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="tips__tricks">tips &amp; tricks</h2> 
 <ul> 
  <li>in App.java define package as : package ${groupId};</li> 
  <li>remove from fileSet the includes tag if all subfolder containing a file is required.</li> 
  <li>generate an archetype using an archetype! Replace archetype.xml with a archetype-metadata.xml as shown</li> 
 </ul> 
 <div class="source"> 
  <pre>        mvn archetype:generate
	        -DgroupId=[your project's group id]
	        -DartifactId=[your project's artifact id]
	        -DarchetypeArtifactId=maven-archetype-archetype
</pre> 
 </div> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Contribute</li>
						<li >
							<a href="https://github.com/gtsntzs/blog/issues/" title="Issues" class="externalLink">Issues</a>
						</li>
						<li >
							<a href="https://github.com/gtsntzs/blog" title="Fork on GitHub" class="externalLink">Fork on GitHub</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Maven documentation</li>
						<li >
							<a href="project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-description">
					<blockquote>This is a very good example collection doing interesting and valuable things.</blockquote>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2014 <a href="https://github.com/gtsntzs">gtsntzs</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 0.46. </span><span class="publishDate">Last Published: 2014-09-10. </span></p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.min.js"></script>
	<script src="./js/reflow-scroll.js"></script>
	<script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="./js/reflow-skin.js"></script>

	</body>
</html>
